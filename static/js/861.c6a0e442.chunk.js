"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[861],{861:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(43),n=s(339),i=s(579);const r="http://localhost:8080/api/appointments";function l(e){return new Date(e).toLocaleDateString("en-US",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}function c(e){let{token:t}=e;const[s,c]=(0,a.useState)([]),[d,o]=(0,a.useState)(!0),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[u,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!t)return;(async()=>{try{const e=await fetch(r,{headers:{Authorization:"Bearer ".concat(t)}}),s=await e.text();c(s?JSON.parse(s):[])}catch(e){n.Ay.error("Failed to load appointments")}finally{o(!1)}})()},[t]);const y=new Date,j=s.filter(e=>new Date(e.appointmentDate)>=y),N=s.filter(e=>new Date(e.appointmentDate)<y);return d?(0,i.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading appointments\u2026"}):(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"My Appointments"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Your scheduled and past doctor consultations"})]}),(0,i.jsxs)("section",{className:"mb-12",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-indigo-600 mb-4",children:"Upcoming"}),0===j.length&&(0,i.jsx)("p",{className:"text-gray-500 text-sm",children:"No upcoming appointments."}),(0,i.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,i.jsxs)("div",{className:"\r bg-white/80 backdrop-blur-xl\r rounded-2xl border border-indigo-100\r shadow-sm hover:shadow-md\r p-6 transition\r ",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{className:"font-semibold text-gray-800",children:["Dr. ",e.doctorName]}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:e.specialization})]}),(0,i.jsx)("span",{className:"text-sm font-medium text-indigo-600",children:l(e.appointmentDate)})]}),(0,i.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["Time: ",(0,i.jsx)("strong",{children:e.timeSlot})]}),e.note&&(0,i.jsxs)("div",{className:"mt-3 text-sm text-gray-500",children:["Note: ",e.note]}),(0,i.jsx)("div",{className:"mt-4 text-right",children:(0,i.jsx)("button",{onClick:()=>{return t=e.id,p(t),void x(!0);var t},className:"\r inline-flex items-center gap-1\r text-sm text-red-600\r hover:text-red-700 hover:underline\r ",children:"\ud83d\uddd1 Cancel appointment"})})]},e.id))})]}),(0,i.jsxs)("section",{children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-500 mb-4",children:"Past"}),0===N.length&&(0,i.jsx)("p",{className:"text-gray-400 text-sm",children:"No past appointments."}),(0,i.jsx)("div",{className:"space-y-3",children:N.map(e=>(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:["Dr. ",e.doctorName]}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:e.specialization})]}),(0,i.jsx)("span",{className:"text-xs text-gray-400",children:l(e.appointmentDate)})]}),(0,i.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:e.timeSlot})]},e.id))})]}),m&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",onClick:()=>!u&&x(!1),children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-6",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Cancel this appointment?"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"You can always book another appointment later."}),(0,i.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,i.jsx)("button",{onClick:()=>x(!1),disabled:u,className:"px-4 py-2 text-sm rounded-lg border hover:bg-gray-50",children:"Keep"}),(0,i.jsx)("button",{onClick:async()=>{if(h){g(!0);try{if(!(await fetch("".concat(r,"/").concat(h),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok)throw new Error;c(e=>e.filter(e=>e.id!==h)),n.Ay.success("Appointment cancelled")}catch(e){n.Ay.error("Could not cancel appointment")}finally{g(!1),x(!1),p(null)}}},disabled:u,className:"\r px-4 py-2 text-sm rounded-lg\r bg-red-600 text-white\r hover:bg-red-700\r disabled:opacity-50\r ",children:u?"Cancelling\u2026":"Yes, cancel"})]})]})})]})}}}]);
//# sourceMappingURL=861.c6a0e442.chunk.js.map