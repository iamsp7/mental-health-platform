{"version":3,"file":"static/js/936.1b6b218e.chunk.js","mappings":"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","sources":["config.js","pages/Journal.jsx"],"sourcesContent":["// export const IS_DEMO =\r\n//   window.location.hostname.includes(\"github.io\");\r\n// src/config.js\r\nexport const IS_DEMO = process.env.NODE_ENV === \"production\";\r\nexport const API = \"http://localhost:8080/api\";\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport toast from \"react-hot-toast\";\r\nimport { IS_DEMO } from \"../config\";\r\n\r\nconst API = \"http://localhost:8080/api/journal\";\r\nconst ML_API = \"http://127.0.0.1:8000/analyze_text\";\r\n\r\n/* ================= MOOD BADGES ================= */\r\n\r\nfunction emotionBadge(label) {\r\n  switch ((label || \"\").toUpperCase()) {\r\n    case \"SUICIDAL\":\r\n      return \"bg-rose-100 text-rose-800 border border-rose-200\";\r\n    case \"DEPRESSION\":\r\n      return \"bg-red-100 text-red-700 border border-red-200\";\r\n    case \"ANXIETY\":\r\n      return \"bg-amber-100 text-amber-800 border border-amber-200\";\r\n    case \"EUPHORIC\":\r\n      return \"bg-indigo-100 text-indigo-700 border border-indigo-200\";\r\n    case \"POSITIVE\":\r\n      return \"bg-green-100 text-green-700 border border-green-200\";\r\n    case \"NEUTRAL\":\r\n      return \"bg-slate-100 text-slate-700 border border-slate-200\";\r\n    default:\r\n      return \"bg-gray-100 text-gray-700 border border-gray-200\";\r\n  }\r\n}\r\n\r\nexport default function Journal({ token }) {\r\n  const [text, setText] = useState(\"\");\r\n  const [entries, setEntries] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [openId, setOpenId] = useState(null);\r\n  const [visibleCount, setVisibleCount] = useState(5);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  /* ================= LOAD JOURNAL ================= */\r\n\r\n  useEffect(() => {\r\n    // ðŸŸ¢ DEMO MODE\r\n    if (IS_DEMO) {\r\n      setEntries([\r\n        {\r\n          id: 1,\r\n          content: \"Today I felt calm and focused while working on my project.\",\r\n          label: \"POSITIVE\",\r\n          createdAt: new Date().toISOString(),\r\n        },\r\n        {\r\n          id: 2,\r\n          content: \"I felt a little anxious about deadlines, but managed it.\",\r\n          label: \"ANXIETY\",\r\n          createdAt: new Date(Date.now() - 86400000).toISOString(),\r\n        },\r\n      ]);\r\n      return;\r\n    }\r\n\r\n    if (!token) return;\r\n\r\n    fetch(API, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    })\r\n      .then((res) => res.text())\r\n      .then((txt) => setEntries(txt ? JSON.parse(txt) : []))\r\n      .catch(() => toast.error(\"Failed to load journal\"));\r\n  }, [token]);\r\n\r\n  /* ================= SAVE ENTRY ================= */\r\n\r\n  const saveEntry = async () => {\r\n    if (!text.trim()) {\r\n      toast(\"Write something before saving âœï¸\");\r\n      return;\r\n    }\r\n\r\n    // ðŸŸ¢ DEMO MODE SAVE\r\n    if (IS_DEMO) {\r\n      const fakeEntry = {\r\n        id: Date.now(),\r\n        content: text,\r\n        label: \"POSITIVE\",\r\n        createdAt: new Date().toISOString(),\r\n      };\r\n\r\n      setEntries((prev) => [fakeEntry, ...prev]);\r\n      setText(\"\");\r\n      toast.success(\"Journal entry saved (Demo Mode)\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      // 1ï¸âƒ£ Analyze text (ML)\r\n      const mlRes = await fetch(ML_API, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ text }),\r\n      });\r\n      const ml = await mlRes.json();\r\n\r\n      // 2ï¸âƒ£ Save journal entry\r\n      await fetch(API, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          content: text,\r\n          label: ml.label,\r\n          suicidalScore: ml.suicidal_score,\r\n        }),\r\n      });\r\n\r\n      toast.success(\"Journal entry saved ðŸ“\");\r\n      setText(\"\");\r\n      setOpenId(null);\r\n\r\n      // 3ï¸âƒ£ Reload entries\r\n      const res = await fetch(API, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const txt = await res.text();\r\n      setEntries(txt ? JSON.parse(txt) : []);\r\n\r\n      // 4ï¸âƒ£ Redirect if support recommended\r\n      if (ml.support_recommended) {\r\n        toast(\"We recommend some support resources ðŸ’™\");\r\n        setTimeout(() => navigate(\"/support\"), 1500);\r\n      }\r\n    } catch {\r\n      toast.error(\"Could not save entry\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /* ================= UI ================= */\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto px-4 py-10\">\r\n      {/* Header */}\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-2xl font-semibold text-gray-800\">\r\n          Daily Journal\r\n        </h1>\r\n        <p className=\"text-sm text-gray-500\">\r\n          Express your thoughts freely. This space is private and safe.\r\n        </p>\r\n      </div>\r\n\r\n      {/* Write Box */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-md border border-gray-100 p-6 mb-12\">\r\n        <textarea\r\n          rows={6}\r\n          className=\"w-full resize-none rounded-xl border border-gray-200 p-4 text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none\"\r\n          placeholder=\"How are you feeling today?\"\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n        />\r\n\r\n        <div className=\"flex justify-end mt-4\">\r\n          <button\r\n            onClick={saveEntry}\r\n            disabled={loading}\r\n            className=\"px-6 py-2 rounded-xl bg-indigo-600 text-white text-sm font-medium hover:bg-indigo-700 transition disabled:opacity-50\"\r\n          >\r\n            {loading ? \"Analyzing...\" : \"Save Entry\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Past Entries */}\r\n      <h2 className=\"text-lg font-medium text-gray-700 mb-4\">\r\n        Past Entries\r\n      </h2>\r\n\r\n      <div className=\"space-y-4\">\r\n        {entries.slice(0, visibleCount).map((e) => {\r\n          const label = (e.label || \"NEUTRAL\").toUpperCase();\r\n\r\n          return (\r\n            <div\r\n              key={e.id}\r\n              className=\"bg-white rounded-xl shadow-sm border p-4 hover:shadow-md transition\"\r\n            >\r\n              <div\r\n                className=\"flex justify-between items-center cursor-pointer\"\r\n                onClick={() => setOpenId(openId === e.id ? null : e.id)}\r\n              >\r\n                <span\r\n                  className={`text-xs px-3 py-1 rounded-full font-medium ${emotionBadge(\r\n                    label\r\n                  )}`}\r\n                >\r\n                  {label}\r\n                </span>\r\n\r\n                <span className=\"text-xs text-gray-400\">\r\n                  {new Date(e.createdAt).toLocaleString()}\r\n                </span>\r\n              </div>\r\n\r\n              {openId === e.id && (\r\n                <p className=\"mt-4 text-sm text-gray-700 whitespace-pre-wrap\">\r\n                  {e.content}\r\n                </p>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {entries.length > visibleCount && (\r\n        <div className=\"flex justify-center mt-8\">\r\n          <button\r\n            onClick={() => setVisibleCount((v) => v + 5)}\r\n            className=\"text-sm text-indigo-600 hover:underline\"\r\n          >\r\n            Load more entries\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["IS_DEMO","process","API","ML_API","emotionBadge","label","toUpperCase","Journal","_ref","token","text","setText","useState","entries","setEntries","loading","setLoading","openId","setOpenId","visibleCount","setVisibleCount","navigate","useNavigate","useEffect","id","content","createdAt","Date","toISOString","now","fetch","headers","Authorization","concat","then","res","txt","JSON","parse","catch","toast","error","_jsxs","className","children","_jsx","rows","placeholder","value","onChange","e","target","onClick","async","trim","fakeEntry","prev","success","mlRes","method","body","stringify","ml","json","suicidalScore","suicidal_score","support_recommended","setTimeout","_unused","disabled","slice","map","toLocaleString","length","v"],"ignoreList":[],"sourceRoot":""}