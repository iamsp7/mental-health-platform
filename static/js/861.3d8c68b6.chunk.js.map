{"version":3,"file":"static/js/861.3d8c68b6.chunk.js","mappings":"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","sources":["config.js","pages/MyAppointments.jsx"],"sourcesContent":["// export const IS_DEMO =\r\n//   window.location.hostname.includes(\"github.io\");\r\n// src/config.js\r\nexport const IS_DEMO = process.env.NODE_ENV === \"production\";\r\nexport const API = \"http://localhost:8080/api\";\r\n","import React, { useEffect, useState } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\nimport { IS_DEMO } from \"../config\";\r\n\r\nconst API = \"http://localhost:8080/api/appointments\";\r\n\r\nfunction formatDate(dateStr) {\r\n  return new Date(dateStr).toLocaleDateString(\"en-US\", {\r\n    weekday: \"short\",\r\n    day: \"numeric\",\r\n    month: \"short\",\r\n    year: \"numeric\",\r\n  });\r\n}\r\n\r\nexport default function MyAppointments({ token }) {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const [selectedId, setSelectedId] = useState(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n\r\n  /* ================= LOAD APPOINTMENTS ================= */\r\n\r\n  useEffect(() => {\r\n    // ðŸŸ¢ DEMO MODE\r\n    if (IS_DEMO) {\r\n      setAppointments([\r\n        {\r\n          id: 1,\r\n          doctorName: \"Ananya Sharma\",\r\n          specialization: \"Psychiatrist\",\r\n          appointmentDate: new Date(Date.now() + 86400000).toISOString(),\r\n          timeSlot: \"10:30 AM\",\r\n          note: \"Initial consultation\",\r\n        },\r\n        {\r\n          id: 2,\r\n          doctorName: \"Rahul Mehta\",\r\n          specialization: \"Clinical Psychologist\",\r\n          appointmentDate: new Date(Date.now() - 86400000 * 2).toISOString(),\r\n          timeSlot: \"04:00 PM\",\r\n        },\r\n      ]);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (!token) return;\r\n\r\n    const load = async () => {\r\n      try {\r\n        const res = await fetch(API, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        const txt = await res.text();\r\n        setAppointments(txt ? JSON.parse(txt) : []);\r\n      } catch {\r\n        toast.error(\"Failed to load appointments\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    load();\r\n  }, [token]);\r\n\r\n  /* ================= FILTER ================= */\r\n\r\n  const now = new Date();\r\n  const upcoming = appointments.filter(\r\n    (a) => new Date(a.appointmentDate) >= now\r\n  );\r\n  const past = appointments.filter(\r\n    (a) => new Date(a.appointmentDate) < now\r\n  );\r\n\r\n  /* ================= CANCEL ================= */\r\n\r\n  const openCancelDialog = (id) => {\r\n    setSelectedId(id);\r\n    setShowConfirm(true);\r\n  };\r\n\r\n  const confirmCancel = async () => {\r\n    if (!selectedId) return;\r\n    setDeleting(true);\r\n\r\n    // ðŸŸ¢ DEMO MODE\r\n    if (IS_DEMO) {\r\n      setAppointments((prev) => prev.filter((a) => a.id !== selectedId));\r\n      toast.success(\"Appointment cancelled (Demo Mode)\");\r\n      setShowConfirm(false);\r\n      setSelectedId(null);\r\n      setDeleting(false);\r\n      return;\r\n    }\r\n\r\n    // ðŸ”µ REAL MODE\r\n    try {\r\n      const res = await fetch(`${API}/${selectedId}`, {\r\n        method: \"DELETE\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      if (!res.ok) throw new Error();\r\n\r\n      setAppointments((prev) =>\r\n        prev.filter((a) => a.id !== selectedId)\r\n      );\r\n\r\n      toast.success(\"Appointment cancelled\");\r\n    } catch {\r\n      toast.error(\"Could not cancel appointment\");\r\n    } finally {\r\n      setDeleting(false);\r\n      setShowConfirm(false);\r\n      setSelectedId(null);\r\n    }\r\n  };\r\n\r\n  /* ================= UI ================= */\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"text-center py-12 text-gray-500\">\r\n        Loading appointmentsâ€¦\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto px-4 py-10\">\r\n      {/* Header */}\r\n      <div className=\"mb-8\">\r\n        <h2 className=\"text-2xl font-semibold text-gray-800\">\r\n          My Appointments\r\n        </h2>\r\n        <p className=\"text-sm text-gray-500\">\r\n          Your scheduled and past doctor consultations\r\n        </p>\r\n      </div>\r\n\r\n      {/* UPCOMING */}\r\n      <section className=\"mb-12\">\r\n        <h3 className=\"text-lg font-medium text-indigo-600 mb-4\">\r\n          Upcoming\r\n        </h3>\r\n\r\n        {upcoming.length === 0 && (\r\n          <p className=\"text-gray-500 text-sm\">\r\n            No upcoming appointments.\r\n          </p>\r\n        )}\r\n\r\n        <div className=\"space-y-4\">\r\n          {upcoming.map((a) => (\r\n            <div\r\n              key={a.id}\r\n              className=\"bg-white/80 backdrop-blur-sm rounded-2xl border border-indigo-100 shadow-sm p-6\"\r\n            >\r\n              <div className=\"flex justify-between items-start\">\r\n                <div>\r\n                  <h4 className=\"font-semibold text-gray-800\">\r\n                    Dr. {a.doctorName}\r\n                  </h4>\r\n                  <p className=\"text-sm text-gray-500\">\r\n                    {a.specialization}\r\n                  </p>\r\n                </div>\r\n\r\n                <span className=\"text-sm font-medium text-indigo-600\">\r\n                  {formatDate(a.appointmentDate)}\r\n                </span>\r\n              </div>\r\n\r\n              <div className=\"mt-3 text-sm text-gray-600\">\r\n                Time: <strong>{a.timeSlot}</strong>\r\n              </div>\r\n\r\n              {a.note && (\r\n                <div className=\"mt-3 text-sm text-gray-500\">\r\n                  Note: {a.note}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"mt-4 text-right\">\r\n                <button\r\n                  onClick={() => openCancelDialog(a.id)}\r\n                  className=\"text-sm text-red-600 hover:underline\"\r\n                >\r\n                  ðŸ—‘ Cancel appointment\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n\r\n      {/* PAST */}\r\n      <section>\r\n        <h3 className=\"text-lg font-medium text-gray-500 mb-4\">\r\n          Past\r\n        </h3>\r\n\r\n        {past.length === 0 && (\r\n          <p className=\"text-gray-400 text-sm\">\r\n            No past appointments.\r\n          </p>\r\n        )}\r\n\r\n        <div className=\"space-y-3\">\r\n          {past.map((a) => (\r\n            <div\r\n              key={a.id}\r\n              className=\"bg-gray-50 rounded-xl p-4 border\"\r\n            >\r\n              <h4 className=\"text-sm font-medium text-gray-700\">\r\n                Dr. {a.doctorName}\r\n              </h4>\r\n              <p className=\"text-xs text-gray-500\">\r\n                {a.specialization}\r\n              </p>\r\n              <p className=\"text-xs text-gray-400 mt-1\">\r\n                {formatDate(a.appointmentDate)} Â· {a.timeSlot}\r\n              </p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n\r\n      {/* CONFIRM MODAL */}\r\n      {showConfirm && (\r\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-2xl p-6 w-full max-w-sm shadow-xl\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">\r\n              Cancel this appointment?\r\n            </h3>\r\n            <p className=\"text-sm text-gray-600 mb-6\">\r\n              You can always book another appointment later.\r\n            </p>\r\n\r\n            <div className=\"flex justify-end gap-3\">\r\n              <button\r\n                onClick={() => setShowConfirm(false)}\r\n                disabled={deleting}\r\n                className=\"px-4 py-2 text-sm rounded-lg border\"\r\n              >\r\n                Keep\r\n              </button>\r\n              <button\r\n                onClick={confirmCancel}\r\n                disabled={deleting}\r\n                className=\"px-4 py-2 text-sm rounded-lg bg-red-600 text-white disabled:opacity-50\"\r\n              >\r\n                {deleting ? \"Cancellingâ€¦\" : \"Yes, cancel\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["IS_DEMO","process","API","formatDate","dateStr","Date","toLocaleDateString","weekday","day","month","year","MyAppointments","_ref","token","appointments","setAppointments","useState","loading","setLoading","showConfirm","setShowConfirm","selectedId","setSelectedId","deleting","setDeleting","useEffect","id","doctorName","specialization","appointmentDate","now","toISOString","timeSlot","note","async","res","fetch","headers","Authorization","concat","txt","text","JSON","parse","_unused","toast","error","load","upcoming","filter","a","past","_jsx","className","children","_jsxs","length","map","onClick","openCancelDialog","disabled","prev","success","method","ok","Error","_unused2"],"ignoreList":[],"sourceRoot":""}