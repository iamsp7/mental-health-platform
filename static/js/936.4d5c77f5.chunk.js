"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[936],{936:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var a=r(43),s=r(902),o=r(339),n=r(579);const i="http://localhost:8080/api/journal",d="http://127.0.0.1:8000/analyze_text";function l(e){switch((e||"").toUpperCase()){case"SUICIDAL":return"bg-rose-100 text-rose-800 border border-rose-200";case"DEPRESSION":return"bg-red-100 text-red-700 border border-red-200";case"ANXIETY":return"bg-amber-100 text-amber-800 border border-amber-200";case"EUPHORIC":return"bg-indigo-100 text-indigo-700 border border-indigo-200";case"POSITIVE":return"bg-green-100 text-green-700 border border-green-200";case"NEUTRAL":return"bg-slate-100 text-slate-700 border border-slate-200";default:return"bg-gray-100 text-gray-700 border border-gray-200"}}function c(e){let{token:t}=e;const[r,c]=(0,a.useState)(""),[u,x]=(0,a.useState)([]),[m,h]=(0,a.useState)(!1),[g,b]=(0,a.useState)(null),[p,y]=(0,a.useState)(5),f=(0,s.Zp)();(0,a.useEffect)(()=>{t&&fetch(i,{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>e.text()).then(e=>x(e?JSON.parse(e):[])).catch(()=>o.Ay.error("Failed to load journal"))},[t]);return(0,n.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Daily Journal"}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Express your thoughts freely. This space is private and safe."})]}),(0,n.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-md border border-gray-100 p-6 mb-12",children:[(0,n.jsx)("textarea",{rows:6,className:"\r w-full resize-none rounded-xl border border-gray-200\r p-4 text-sm leading-relaxed\r focus:ring-2 focus:ring-indigo-500 focus:outline-none\r transition\r ",placeholder:"How are you feeling today?",value:r,onChange:e=>c(e.target.value)}),(0,n.jsx)("div",{className:"flex justify-end mt-4",children:(0,n.jsx)("button",{onClick:async()=>{if(r.trim()){h(!0);try{const e=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:r})}),a=await e.json();await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({content:r,label:a.label,suicidalScore:a.suicidal_score})}),o.Ay.success("Journal entry saved \ud83d\udcdd"),c(""),b(null);const s=await fetch(i,{headers:{Authorization:"Bearer ".concat(t)}}),n=await s.text();x(n?JSON.parse(n):[]),a.support_recommended&&((0,o.Ay)("We recommend some support resources \ud83d\udc99"),setTimeout(()=>f("/support"),1500))}catch(e){o.Ay.error("Could not save entry")}finally{h(!1)}}else(0,o.Ay)("Write something before saving \u270d\ufe0f")},disabled:m,className:"\r px-6 py-2 rounded-xl\r bg-indigo-600 text-white text-sm font-medium\r hover:bg-indigo-700\r transition\r disabled:opacity-50\r ",children:m?"Analyzing...":"Save Entry"})})]}),(0,n.jsx)("h2",{className:"text-lg font-medium text-gray-700 mb-4",children:"Past Entries"}),0===u.length&&(0,n.jsx)("div",{className:"text-sm text-gray-500 bg-gray-50 border border-gray-200 p-4 rounded-xl",children:"No journal entries yet. Start by writing how you feel today \ud83c\udf31"}),(0,n.jsx)("div",{className:"space-y-4 mt-4",children:u.slice(0,p).map(e=>{const t=(e.label||"NEUTRAL").toUpperCase();return(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-4 transition hover:shadow-md",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>b(g===e.id?null:e.id),children:[(0,n.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-medium ".concat(l(t)),children:t}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString()}),(0,n.jsx)("span",{className:"text-gray-400 transition-transform ".concat(g===e.id?"rotate-180":""),children:"\u25bc"})]})]}),(0,n.jsxs)("div",{className:"overflow-hidden transition-all duration-300 ".concat(g===e.id?"max-h-96 mt-4":"max-h-0"),children:[(0,n.jsx)("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:e.content}),"DEPRESSION"===t&&(0,n.jsx)("div",{className:"mt-3 text-sm text-red-700 bg-red-50 border border-red-200 p-3 rounded-lg",children:"It looks like you\u2019re feeling emotionally low. Talking to someone you trust may help."}),"EUPHORIC"===t&&(0,n.jsx)("div",{className:"mt-3 text-sm text-indigo-700 bg-indigo-50 border border-indigo-200 p-3 rounded-lg",children:"You seem to be feeling very energized today."}),"SUICIDAL"===t&&(0,n.jsx)("div",{className:"mt-3 text-sm text-rose-700 bg-rose-50 border border-rose-200 p-3 rounded-lg",children:"You don\u2019t have to go through this alone. Support can help."})]})]},e.id)})}),u.length>p&&(0,n.jsx)("div",{className:"flex justify-center mt-8",children:(0,n.jsx)("button",{onClick:()=>y(e=>e+5),className:"text-sm text-indigo-600 hover:underline",children:"Load more entries"})})]})}}}]);
//# sourceMappingURL=936.4d5c77f5.chunk.js.map