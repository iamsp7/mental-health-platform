"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[936],{488:(e,t,r)=>{r.d(t,{j:()=>a});const a=window.location.hostname.includes("github.io")},936:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var a=r(43),s=r(902),n=r(339),o=r(488),i=r(579);const d="http://localhost:8080/api/journal",l="http://127.0.0.1:8000/analyze_text";function c(e){switch((e||"").toUpperCase()){case"SUICIDAL":return"bg-rose-100 text-rose-800 border border-rose-200";case"DEPRESSION":return"bg-red-100 text-red-700 border border-red-200";case"ANXIETY":return"bg-amber-100 text-amber-800 border border-amber-200";case"EUPHORIC":return"bg-indigo-100 text-indigo-700 border border-indigo-200";case"POSITIVE":return"bg-green-100 text-green-700 border border-green-200";case"NEUTRAL":return"bg-slate-100 text-slate-700 border border-slate-200";default:return"bg-gray-100 text-gray-700 border border-gray-200"}}function u(e){let{token:t}=e;const[r,u]=(0,a.useState)(""),[x,h]=(0,a.useState)([]),[m,b]=(0,a.useState)(!1),[g,p]=(0,a.useState)(null),[y,f]=(0,a.useState)(5),w=(0,s.Zp)();(0,a.useEffect)(()=>{o.j?h([{id:1,content:"Today I felt calm and focused while working on my project.",label:"POSITIVE",createdAt:(new Date).toISOString()},{id:2,content:"I felt a little anxious about deadlines, but managed it.",label:"ANXIETY",createdAt:new Date(Date.now()-864e5).toISOString()}]):t&&fetch(d,{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>e.text()).then(e=>h(e?JSON.parse(e):[])).catch(()=>n.Ay.error("Failed to load journal"))},[t]);return(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Daily Journal"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Express your thoughts freely. This space is private and safe."})]}),(0,i.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-md border border-gray-100 p-6 mb-12",children:[(0,i.jsx)("textarea",{rows:6,className:"w-full resize-none rounded-xl border border-gray-200 p-4 text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"How are you feeling today?",value:r,onChange:e=>u(e.target.value)}),(0,i.jsx)("div",{className:"flex justify-end mt-4",children:(0,i.jsx)("button",{onClick:async()=>{if(r.trim()){if(o.j){const e={id:Date.now(),content:r,label:"POSITIVE",createdAt:(new Date).toISOString()};return h(t=>[e,...t]),u(""),void n.Ay.success("Journal entry saved (Demo Mode)")}b(!0);try{const e=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:r})}),a=await e.json();await fetch(d,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({content:r,label:a.label,suicidalScore:a.suicidal_score})}),n.Ay.success("Journal entry saved \ud83d\udcdd"),u(""),p(null);const s=await fetch(d,{headers:{Authorization:"Bearer ".concat(t)}}),o=await s.text();h(o?JSON.parse(o):[]),a.support_recommended&&((0,n.Ay)("We recommend some support resources \ud83d\udc99"),setTimeout(()=>w("/support"),1500))}catch(e){n.Ay.error("Could not save entry")}finally{b(!1)}}else(0,n.Ay)("Write something before saving \u270d\ufe0f")},disabled:m,className:"px-6 py-2 rounded-xl bg-indigo-600 text-white text-sm font-medium hover:bg-indigo-700 transition disabled:opacity-50",children:m?"Analyzing...":"Save Entry"})})]}),(0,i.jsx)("h2",{className:"text-lg font-medium text-gray-700 mb-4",children:"Past Entries"}),(0,i.jsx)("div",{className:"space-y-4",children:x.slice(0,y).map(e=>{const t=(e.label||"NEUTRAL").toUpperCase();return(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-4 hover:shadow-md transition",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>p(g===e.id?null:e.id),children:[(0,i.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-medium ".concat(c(t)),children:t}),(0,i.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString()})]}),g===e.id&&(0,i.jsx)("p",{className:"mt-4 text-sm text-gray-700 whitespace-pre-wrap",children:e.content})]},e.id)})}),x.length>y&&(0,i.jsx)("div",{className:"flex justify-center mt-8",children:(0,i.jsx)("button",{onClick:()=>f(e=>e+5),className:"text-sm text-indigo-600 hover:underline",children:"Load more entries"})})]})}}}]);
//# sourceMappingURL=936.221158f3.chunk.js.map