"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[414],{414:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(555),r=s(43),n=s(339),l=s(488),o=s(579);const c="http://localhost:8080/api/journal";function i(e){return new Date(e).toLocaleDateString("en-US",{weekday:"long"})}function d(e){switch((e||"").toUpperCase()){case"POSITIVE":return"bg-green-50/80 border-green-200";case"ANXIETY":return"bg-orange-50/80 border-orange-200";case"DEPRESSION":return"bg-red-50/80 border-red-200";case"SUICIDAL":return"bg-rose-50/80 border-rose-300";default:return"bg-gray-50/80 border-gray-200"}}function x(e){let{entries:t}=e;const{counts:s,total:a}=function(e){const t={POSITIVE:0,ANXIETY:0,DEPRESSION:0,SUICIDAL:0,NEUTRAL:0};e.forEach(e=>{const s=(e.label||"NEUTRAL").toUpperCase();t[s]=(t[s]||0)+1});const s=Object.values(t).reduce((e,t)=>e+t,0)||1;return{counts:t,total:s}}(t),r=e=>Math.round(e/a*100);return(0,o.jsxs)("div",{className:"w-full h-4 rounded-full overflow-hidden flex bg-gray-200/70 mt-2 mb-4",children:[s.POSITIVE>0&&(0,o.jsx)("div",{className:"bg-green-500",style:{width:"".concat(r(s.POSITIVE),"%")}}),s.ANXIETY>0&&(0,o.jsx)("div",{className:"bg-orange-400",style:{width:"".concat(r(s.ANXIETY),"%")}}),s.DEPRESSION>0&&(0,o.jsx)("div",{className:"bg-red-500",style:{width:"".concat(r(s.DEPRESSION),"%")}}),s.SUICIDAL>0&&(0,o.jsx)("div",{className:"bg-rose-700",style:{width:"".concat(r(s.SUICIDAL),"%")}}),s.NEUTRAL>0&&(0,o.jsx)("div",{className:"bg-gray-400",style:{width:"".concat(r(s.NEUTRAL),"%")}})]})}function u(e){let{token:t}=e;const[s,u]=(0,r.useState)({}),[m,g]=(0,r.useState)(!0),[b,y]=(0,r.useState)(null),[f,j]=(0,r.useState)(!1),p=(0,r.useCallback)(async()=>{if(l.j){const e=[{id:1,content:"Felt calm and productive today.",label:"POSITIVE",createdAt:(new Date).toISOString()},{id:2,content:"A bit anxious before presentation.",label:"ANXIETY",createdAt:(new Date).toISOString()},{id:3,content:"Low mood in the evening.",label:"DEPRESSION",createdAt:new Date(Date.now()-864e5).toISOString()}],t={};return e.forEach(e=>{const s=i(e.createdAt);t[s]||(t[s]=[]),t[s].push(e)}),u(t),void g(!1)}try{const e=await fetch(c,{headers:{Authorization:"Bearer ".concat(t)}}),s=await e.text(),a=s?JSON.parse(s):[],r={};a.forEach(e=>{const t=i(e.createdAt);r[t]||(r[t]=[]),r[t].push(e)}),u(r)}catch(e){n.Ay.error("Failed to load mood history")}finally{g(!1)}},[t]);(0,r.useEffect)(()=>{p()},[p]);return m?(0,o.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading mood history\u2026"}):(0,o.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Mood History"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Day-wise emotional patterns from your journal"})]}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-4 text-xs text-gray-600 mb-8",children:[(0,o.jsx)(h,{color:"bg-green-500",label:"Positive"}),(0,o.jsx)(h,{color:"bg-orange-400",label:"Anxiety"}),(0,o.jsx)(h,{color:"bg-red-500",label:"Depression"}),(0,o.jsx)(h,{color:"bg-rose-700",label:"Suicidal"}),(0,o.jsx)(h,{color:"bg-gray-400",label:"Neutral"})]}),(0,o.jsx)("div",{className:"space-y-10",children:Object.entries(s).map(e=>{let[t,s]=e;return(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-indigo-600",children:t}),(0,o.jsx)(x,{entries:s}),(0,o.jsx)("div",{className:"grid sm:grid-cols-2 gap-4",children:s.map(e=>(0,o.jsxs)("div",{className:"relative rounded-xl border p-4 backdrop-blur-sm hover:shadow-md transition ".concat(d(e.label)),children:[(0,o.jsx)("button",{onClick:()=>y(e),className:"absolute top-3 right-3 w-8 h-8 flex items-center justify-center rounded-full text-gray-400 hover:text-red-600 hover:bg-red-50 transition",children:"\ud83d\uddd1"}),(0,o.jsxs)("div",{className:"flex justify-between items-center mb-2 pr-8",children:[(0,o.jsx)("span",{className:"text-xs font-semibold uppercase text-gray-700",children:e.label}),(0,o.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,o.jsx)("p",{className:"text-sm text-gray-700 line-clamp-3",children:e.content})]},e.id))})]},t)})}),b&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-xl",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Delete this entry?"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"This action cannot be undone."}),(0,o.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,o.jsx)("button",{onClick:()=>y(null),className:"px-4 py-2 text-sm rounded-lg border hover:bg-gray-50",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(b){if(l.j)return u(e=>{const t=(0,a.A)({},e);return Object.keys(t).forEach(e=>{t[e]=t[e].filter(e=>e.id!==b.id),0===t[e].length&&delete t[e]}),t}),n.Ay.success("Entry removed (Demo Mode)"),void y(null);j(!0);try{if(!(await fetch("".concat(c,"/").concat(b.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok)throw new Error;n.Ay.success("Journal entry deleted \ud83d\uddd1\ufe0f"),y(null),p()}catch(e){n.Ay.error("Failed to delete entry")}finally{j(!1)}}},disabled:f,className:"px-4 py-2 text-sm rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",children:f?"Deleting\u2026":"Delete"})]})]})})]})}function h(e){let{color:t,label:s}=e;return(0,o.jsxs)("span",{className:"flex items-center gap-1",children:[(0,o.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(t)}),s]})}},488:(e,t,s)=>{s.d(t,{j:()=>a});const a=!0}}]);
//# sourceMappingURL=414.25a1a869.chunk.js.map