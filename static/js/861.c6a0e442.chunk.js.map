{"version":3,"file":"static/js/861.c6a0e442.chunk.js","mappings":"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","sources":["pages/MyAppointments.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst API = \"http://localhost:8080/api/appointments\";\r\n\r\nfunction formatDate(dateStr) {\r\n  return new Date(dateStr).toLocaleDateString(\"en-US\", {\r\n    weekday: \"short\",\r\n    day: \"numeric\",\r\n    month: \"short\",\r\n    year: \"numeric\",\r\n  });\r\n}\r\n\r\nexport default function MyAppointments({ token }) {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // modal state\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const [selectedId, setSelectedId] = useState(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n\r\n    const load = async () => {\r\n      try {\r\n        const res = await fetch(API, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        const txt = await res.text();\r\n        setAppointments(txt ? JSON.parse(txt) : []);\r\n      } catch {\r\n        toast.error(\"Failed to load appointments\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    load();\r\n  }, [token]);\r\n\r\n  const now = new Date();\r\n  const upcoming = appointments.filter(\r\n    (a) => new Date(a.appointmentDate) >= now\r\n  );\r\n  const past = appointments.filter(\r\n    (a) => new Date(a.appointmentDate) < now\r\n  );\r\n\r\n  const openCancelDialog = (id) => {\r\n    setSelectedId(id);\r\n    setShowConfirm(true);\r\n  };\r\n\r\n  const confirmCancel = async () => {\r\n    if (!selectedId) return;\r\n    setDeleting(true);\r\n\r\n    try {\r\n      const res = await fetch(`${API}/${selectedId}`, {\r\n        method: \"DELETE\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      if (!res.ok) throw new Error();\r\n\r\n      setAppointments((prev) =>\r\n        prev.filter((a) => a.id !== selectedId)\r\n      );\r\n\r\n      toast.success(\"Appointment cancelled\");\r\n    } catch {\r\n      toast.error(\"Could not cancel appointment\");\r\n    } finally {\r\n      setDeleting(false);\r\n      setShowConfirm(false);\r\n      setSelectedId(null);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"text-center py-12 text-gray-500\">\r\n        Loading appointmentsâ€¦\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto px-4 py-10\">\r\n\r\n      {/* Header */}\r\n      <div className=\"mb-8\">\r\n        <h2 className=\"text-2xl font-semibold text-gray-800\">\r\n          My Appointments\r\n        </h2>\r\n        <p className=\"text-sm text-gray-500\">\r\n          Your scheduled and past doctor consultations\r\n        </p>\r\n      </div>\r\n\r\n      {/* UPCOMING */}\r\n      <section className=\"mb-12\">\r\n        <h3 className=\"text-lg font-medium text-indigo-600 mb-4\">\r\n          Upcoming\r\n        </h3>\r\n\r\n        {upcoming.length === 0 && (\r\n          <p className=\"text-gray-500 text-sm\">\r\n            No upcoming appointments.\r\n          </p>\r\n        )}\r\n\r\n        <div className=\"space-y-4\">\r\n          {upcoming.map((a) => (\r\n            <div\r\n              key={a.id}\r\n              className=\"\r\n                bg-white/80 backdrop-blur-xl\r\n                rounded-2xl border border-indigo-100\r\n                shadow-sm hover:shadow-md\r\n                p-6 transition\r\n              \"\r\n            >\r\n              <div className=\"flex justify-between items-start\">\r\n                <div>\r\n                  <h4 className=\"font-semibold text-gray-800\">\r\n                    Dr. {a.doctorName}\r\n                  </h4>\r\n                  <p className=\"text-sm text-gray-500\">\r\n                    {a.specialization}\r\n                  </p>\r\n                </div>\r\n\r\n                <span className=\"text-sm font-medium text-indigo-600\">\r\n                  {formatDate(a.appointmentDate)}\r\n                </span>\r\n              </div>\r\n\r\n              <div className=\"mt-3 text-sm text-gray-600\">\r\n                Time: <strong>{a.timeSlot}</strong>\r\n              </div>\r\n\r\n              {a.note && (\r\n                <div className=\"mt-3 text-sm text-gray-500\">\r\n                  Note: {a.note}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"mt-4 text-right\">\r\n                <button\r\n                  onClick={() => openCancelDialog(a.id)}\r\n                  className=\"\r\n                    inline-flex items-center gap-1\r\n                    text-sm text-red-600\r\n                    hover:text-red-700 hover:underline\r\n                  \"\r\n                >\r\n                  ðŸ—‘ Cancel appointment\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n\r\n      {/* PAST */}\r\n      <section>\r\n        <h3 className=\"text-lg font-medium text-gray-500 mb-4\">\r\n          Past\r\n        </h3>\r\n\r\n        {past.length === 0 && (\r\n          <p className=\"text-gray-400 text-sm\">\r\n            No past appointments.\r\n          </p>\r\n        )}\r\n\r\n        <div className=\"space-y-3\">\r\n          {past.map((a) => (\r\n            <div\r\n              key={a.id}\r\n              className=\"bg-gray-50 rounded-xl p-4 border\"\r\n            >\r\n              <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                  <h4 className=\"text-sm font-medium text-gray-700\">\r\n                    Dr. {a.doctorName}\r\n                  </h4>\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    {a.specialization}\r\n                  </p>\r\n                </div>\r\n\r\n                <span className=\"text-xs text-gray-400\">\r\n                  {formatDate(a.appointmentDate)}\r\n                </span>\r\n              </div>\r\n\r\n              <div className=\"mt-1 text-xs text-gray-500\">\r\n                {a.timeSlot}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n\r\n      {/* CONFIRM CANCEL MODAL */}\r\n      {showConfirm && (\r\n        <div\r\n          className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\"\r\n          onClick={() => !deleting && setShowConfirm(false)}\r\n        >\r\n          <div\r\n            className=\"bg-white rounded-2xl shadow-xl w-full max-w-sm p-6\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">\r\n              Cancel this appointment?\r\n            </h3>\r\n\r\n            <p className=\"text-sm text-gray-600 mb-6\">\r\n              You can always book another appointment later.\r\n            </p>\r\n\r\n            <div className=\"flex justify-end gap-3\">\r\n              <button\r\n                onClick={() => setShowConfirm(false)}\r\n                disabled={deleting}\r\n                className=\"px-4 py-2 text-sm rounded-lg border hover:bg-gray-50\"\r\n              >\r\n                Keep\r\n              </button>\r\n\r\n              <button\r\n                onClick={confirmCancel}\r\n                disabled={deleting}\r\n                className=\"\r\n                  px-4 py-2 text-sm rounded-lg\r\n                  bg-red-600 text-white\r\n                  hover:bg-red-700\r\n                  disabled:opacity-50\r\n                \"\r\n              >\r\n                {deleting ? \"Cancellingâ€¦\" : \"Yes, cancel\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["API","formatDate","dateStr","Date","toLocaleDateString","weekday","day","month","year","MyAppointments","_ref","token","appointments","setAppointments","useState","loading","setLoading","showConfirm","setShowConfirm","selectedId","setSelectedId","deleting","setDeleting","useEffect","async","res","fetch","headers","Authorization","concat","txt","text","JSON","parse","_unused","toast","error","load","now","upcoming","filter","a","appointmentDate","past","_jsx","className","children","_jsxs","length","map","doctorName","specialization","timeSlot","note","onClick","openCancelDialog","id","e","stopPropagation","disabled","method","ok","Error","prev","success","_unused2"],"ignoreList":[],"sourceRoot":""}