"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[861],{488:(e,t,a)=>{a.d(t,{j:()=>s});const s=!0},861:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(43),n=a(339),i=a(488),l=a(579);const c="http://localhost:8080/api/appointments";function r(e){return new Date(e).toLocaleDateString("en-US",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}function o(e){let{token:t}=e;const[a,o]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[x,h]=(0,s.useState)(!1),[p,u]=(0,s.useState)(null),[y,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(i.j)return o([{id:1,doctorName:"Ananya Sharma",specialization:"Psychiatrist",appointmentDate:new Date(Date.now()+864e5).toISOString(),timeSlot:"10:30 AM",note:"Initial consultation"},{id:2,doctorName:"Rahul Mehta",specialization:"Clinical Psychologist",appointmentDate:new Date(Date.now()-1728e5).toISOString(),timeSlot:"04:00 PM"}]),void m(!1);if(!t)return;(async()=>{try{const e=await fetch(c,{headers:{Authorization:"Bearer ".concat(t)}}),a=await e.text();o(a?JSON.parse(a):[])}catch(e){n.Ay.error("Failed to load appointments")}finally{m(!1)}})()},[t]);const j=new Date,N=a.filter(e=>new Date(e.appointmentDate)>=j),f=a.filter(e=>new Date(e.appointmentDate)<j);return d?(0,l.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading appointments\u2026"}):(0,l.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"My Appointments"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Your scheduled and past doctor consultations"})]}),(0,l.jsxs)("section",{className:"mb-12",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-indigo-600 mb-4",children:"Upcoming"}),0===N.length&&(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:"No upcoming appointments."}),(0,l.jsx)("div",{className:"space-y-4",children:N.map(e=>(0,l.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-indigo-100 shadow-sm p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"font-semibold text-gray-800",children:["Dr. ",e.doctorName]}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:e.specialization})]}),(0,l.jsx)("span",{className:"text-sm font-medium text-indigo-600",children:r(e.appointmentDate)})]}),(0,l.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["Time: ",(0,l.jsx)("strong",{children:e.timeSlot})]}),e.note&&(0,l.jsxs)("div",{className:"mt-3 text-sm text-gray-500",children:["Note: ",e.note]}),(0,l.jsx)("div",{className:"mt-4 text-right",children:(0,l.jsx)("button",{onClick:()=>{return t=e.id,u(t),void h(!0);var t},className:"text-sm text-red-600 hover:underline",children:"\ud83d\uddd1 Cancel appointment"})})]},e.id))})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-500 mb-4",children:"Past"}),0===f.length&&(0,l.jsx)("p",{className:"text-gray-400 text-sm",children:"No past appointments."}),(0,l.jsx)("div",{className:"space-y-3",children:f.map(e=>(0,l.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border",children:[(0,l.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:["Dr. ",e.doctorName]}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:e.specialization}),(0,l.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[r(e.appointmentDate)," \xb7 ",e.timeSlot]})]},e.id))})]}),x&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-xl",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Cancel this appointment?"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"You can always book another appointment later."}),(0,l.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,l.jsx)("button",{onClick:()=>h(!1),disabled:y,className:"px-4 py-2 text-sm rounded-lg border",children:"Keep"}),(0,l.jsx)("button",{onClick:async()=>{if(p){if(g(!0),i.j)return o(e=>e.filter(e=>e.id!==p)),n.Ay.success("Appointment cancelled (Demo Mode)"),h(!1),u(null),void g(!1);try{if(!(await fetch("".concat(c,"/").concat(p),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok)throw new Error;o(e=>e.filter(e=>e.id!==p)),n.Ay.success("Appointment cancelled")}catch(e){n.Ay.error("Could not cancel appointment")}finally{g(!1),h(!1),u(null)}}},disabled:y,className:"px-4 py-2 text-sm rounded-lg bg-red-600 text-white disabled:opacity-50",children:y?"Cancelling\u2026":"Yes, cancel"})]})]})})]})}}}]);
//# sourceMappingURL=861.3d8c68b6.chunk.js.map